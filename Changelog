2021-01-14 cage

        * annotate.el:

	- added padding also for notes placed on the margin of the window.

2021-01-06  cage

        * annotate.el:

	- prevented side effects of 'split-string'.


2020-12-23  cage

        * annotate.el:

	- changed customizable  variable related to exporting.   As we are
	using  diff-mode   could  instruct   the  executable   to  operate
	accordingly to a command line.

2020-12-23  cage

        * annotate.el:

	- rewritten export and integrate of annotations export use now the
	Emacs diff functions to generate a buffer containing the patch.

2020-12-23  cage

        * annotate.el:

	- fixed export for annotated text made from a single line.

2020-12-22  cage

        * annotate.el:

	- removed code, in integration procedures, that should never runs.

2020-12-22  cage

        * annotate.el:

	- fixed integration of multiline annotated text.

2020-12-20  cage

        * Changelog, NEWS.org, annotate.el:

	- updated version;
	- updated NEWS and Changelog (also fixed grammar for the former).

2020-12-19  cage

        * annotate.el:

	-   moved  'save-match-data'   from   the   function  that   calls
	'annotate--split-lines' inside  the body of the  latter; to remove
	any side-effect.

2020-12-19  cage

        * annotate.el:

	- fixed the width of the last row of the box

2020-12-19  cage

        * annotate.el:

	- wrapped 'annotate-wrap-annotation-in-box' with 'save-match-data.

2020-12-19  cage

        * annotate.el:

	- added procedures to pad multiline annotation text.

2020-12-18  cage

        * annotate.el:

	- extracted  local function  and taken  into account  info node
        names (that should not be expanded).

2020-12-18  cage

        * annotate.el:

	-  stored abbreviated  filenames for  the path  component of  each
	record of the annotations database; - improved a docstring.

2020-12-16 cage

	* Changelog, NEWS.org, annotate.el:

	Updated version and documentations.

2020-12-07  cage

        * README.org, annotate.el:

	- fixed more typos.

2020-12-01  cage

        * README.org, annotate.el:

	- allow overwriting (even partial)  of annotations.  That is, user
	can place an annotation on top of an already existing one. The new
	will  delete  overlapped  portion  of the  old  annotation.   This
	feature    should   not    allow   to    break   an    annotation,
	though. Annotations can not overlaps.

	- added a new customizable variable:

        'annotate-warn-if-hash-mismatch'  when  nil  prevent  printing  of
	warning  when annotation  database's'  hash and  file  has do  not
	match;

	- fixed bug  in alternating coloring of  annotation and underlined
	text;

	- updated README;

	- fixed some typos.

2020-11-22  cage

        * annotate.el:

	- added more docstrings.

2020-11-12  cage

        * annotate.el:

	- prevented getting shared value for 'annotate-file' in
        '%load-annotation-data'.

	This  way  we can  ensure  that  'annotate-file' can  be  declared
	buffer-local and  different annotation  databases can be  used from
	different buffers.

2020-11-11  cage

        * annotate.el:
	- fitted 'annotate-position-inside-chain-p' into   'annotate--position-inside-annotated-text-p';
	- fixed some typos.

2020-11-06  cage

        * annotate.el:

	- Fixed a regression  and some bugs related to
        incorrect calculation of of multiline annotations.

	To reproduce the bugs:

	legend:

	a = annotated text
	* = non annotated text

	- First bug

	Create a multiline annotation using region.

	aaaa
	aaaa
	aaaa    ####

	Place the cursor as below.

	aaaa
	^ cursor
	aaaa
	aaaa    ####

	type a character

	a****
	aaaa
	aaaa    ####

	The annotated text has a "gap"

	Fix proposed: revert to the old (correct behaviour)

	Second bug

	aaaa
	aaaa
	aaaa    ####

	Place the cursor as below.

	aaaa
	^ cursor on the first column
	aaaa
	aaaa    ####

	type some text

	***
	aaa
	aaa    ####

	Save (C-x C-s)

	you  get an  error  on  the echo  area:  "let*:  Wrong type  argument:
	overlayp, nil" and the annotations are not correctly saved.

	Fix proposed: remove the offending code.

	Third bug

	a multiline bug as before

	aaaa
	aaaa
	aaaa    ####

	place the cursor here:

	aaaa
	aaaa
	^ cursor
	aaaa    ####

	type some text

	aaaa
	*****
	aaaa    ####

	Then annotate the same line (C-c C-a):

	aaaa
	aaaa    ####
	aaaa    ####

	we  introduced  a  annotation  in  the gap  of  the  already  existing
	multiline annotation.

	Fix proposed: prevents annotating text inside an annotation.

2020-09-29
        * README.org, annotate.el
	- updated README;
	- increased version;
	- updated NEWS and Changelog.

2020-09-22
        * annotate.el
	- added   command   'annotate-summary-of-file-from-current-pos';
	this command shows a summary window that contains the annotation
	in the  active buffer  that appears after  the cursor  position;
	- added docstrings.

2020-09-20
        * annotate.el
	- fixed indentation.

2020-09-20
        * annotate.el
	- Using "help-echo" to print annotations instead of render it on the
        buffer.
	This feature is optional and can be activated using the
        customizable variable 'annotate-use-echo-area'

2020-09-20
        * README.org
	- Removed internal link because of issue #79.

2020-08-11
	* annotate.el (annotate-annotate, annotate-load-annotation-data
	               annotate-create-annotation, annotate-summary-query-parse-note,
                       annotate-switch-db)

	- Added errors conditions signalling to some functions.

2020-07-01
	* annotate.el (annotate-change-annotation)

	- ensured that the modified status of as buffer is not modified by the local
	function 'delete' in 'annotate-change-annotation';
	- added dependency on 'info'.

2020-06-26
	* annotate.el (annotate-switch-db)
	- Added file argument 'database-file-path',
	  this could help people calling this function in a non interactive
	  way from their code;
	- fixed some typos in documentation and comments.

2020-06-09 Bastian Bechtold, cage
	* annotate.el (annotate-buffers-annotate-mode, annotate-switch-db)
	- added functions to switch the database of annotations used for the emacs session;
	- increased version to 0.8.0

2020-05-18 Bastian Bechtold, cage
	* annotate.el
	- Increased version to 0.7.0 for stable release

2020-01-25 Bastian Bechtold, cage

        * annotate.el (annotate-annotation-force-newline-policy,
                       annotate-annotation-newline-policy-forced-p,
                       annotate-create-annotation,
                       annotate-lineate,
                       annotate-summary-delete-annotation-button-pressed):
        - mitigated bug that prevented rendering of annotation in
          org-mode forcing 'newline' policy for annotation
          positioning.
          See the local function
          'maybe-force-newline-policy' in 'annotate-create-annotation'.
        - chosen the window that contains the current buffer when resizing the annotations
          see variable 'current-window' in 'annotate-lineate';
        - redraw buffer if one of its annotations is deleted
          operating from the summary window.
          see: 'annotate-summary-delete-annotation-button-pressed'.

2020-01-22 Bastian Bechtold, cage

        * annotate.el (annotate--font-lock-matcher):
        - fixed error for regexp search
        Sometimes some modes/package puts overlay on the last character of a
        buffer (notably SLIME when the parenthesis of a form are not
        balanced). This will make 're-search-forward' in the aforementioned
        function fails and font lock becomes a mess (e.g. text color
        disappears).

2020-02-10 Bastian Bechtold, cage
        * annotate.el (annotate--font-lock-matcher annotate-bounds annotate-symbol-strictly-at-point annotate-next-annotation-change annotate-previous-annotation-change annotate-clear-annotations annotate-annotate)
        - prevented fails of fontification of annotated regions
        As we walk across the overlays we can get past the limit;
        - mark buffer as modified even if the only action the user performed
        was clearing annotation (and at least an annotation was present in
        the file)
        - prevented annotation of text marked with a region that overlap with
        an existing annotation.

2020-03-06 Bastian Bechtold, cage
        * annotate.el (annotate-annotation-force-newline-policy annotate-annotation-newline-policy-forced-p annotate-summary-delete-annotation-button-pressed annotate--annotation-builder)

        - used  an heuristic  to force newline  policy when  the annotated
        text  does  not  uses a  standard  fonts  (using  font  height  as
        comparison);

        -  when, in  summary  window,  the delete  button  is pressed  the
        software take care of reload  annotate mode for the visited buffer
        the annotation button is referring to;

        - when re-flowing annotation the window width was calculated always
        for the current buffer (the one with the focus).

2020-03-06 Bastian Bechtold, cage
        * annotate.el

        - each annotation (the overlay, actually) now has a property 'position
          and its  value indicates which  positions the annotations holds  in a
          "chain"  of  annotations.

          Even  if  rendered separately  each  chain  represents a  single
          annotation.

          The last annotation in the chain has position's value equal to -1.

          If  the set  of a  group/chain  is formed  by only  one element  the
          position's value is -1 as well.

          Please note that this changes impacted more or less the whole
          package's code.

2020-03-16 Bastian Bechtold, cage
        * annotate.el (annotate-annotate)

	- fixed annotation picking in 'annotate-annotate'
          at  the  beginning  of  the  function we  was  picking  the  first
	  available  overlay.   So  the annotated  text  contained  multiple
	  overlays and an  annotation was not the first we  missed the last,
	  This means, for example, that the annotation was not modifiable.
2020-03-16 Bastian Bechtold, cage
        * annotate.el (annotate-create-annotation)

	- fixed managing return value of
	"(get-text-property changed-face-pos 'face)"

	When finding  the face of a portion  of buffer, to try to  get the right
	positioning   of   the    annotation,   using:

	"(get-text-property changed-face-pos 'face)"

	the code  assumed this function returned  a symbol (the face  of the
	text) or nil: this is  incorrect according to the documentation; the
	code above can returns a symbol, a plist or even list of symbols.
